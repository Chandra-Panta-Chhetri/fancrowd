<section class="container">
    <app-spinner *ngIf="!user"></app-spinner>
    <div class="profile-info-container" *ngIf="user">
        <section class="profile-img-info-container">
            <div class="profile-img-wrapper">
                <img class="profile-img" src="{{user.profileUrl}}"
                    onError="this.src='https://www.thermaxglobal.com/wp-content/uploads/2020/05/image-not-found.jpg'"
                    alt="Profile Picture">
            </div>

            <mat-card class="user-info">
                <mat-card-content>
                    <p class="user-info-item"><span class="user-info-label">Username
                        </span><span>{{user?.username}}</span></p>
                    <p class="user-info-item"><span class="user-info-label">Full Name
                        </span><span>{{user?.fullName | titlecase}}</span></p>
                    <p class="user-info-item"><span class="user-info-label">E-mail </span><span>{{user?.email}}</span>
                    </p>
                    <p class="user-info-item"><span class="user-info-label">Country
                        </span><span>{{user?.country}}</span></p>
                    <p class="user-info-item"><span class="user-info-label">City </span><span>{{user?.city}}</span></p>
                    <div class="profile-action-button-container">
                        <button mat-raised-button color="primary" *ngIf="loggedInUser?.username === user?.username"
                            (click)="openEditAccountDialog()"><i class="fas fa-edit"></i> Edit
                            Info</button>
                        <button mat-raised-button color="warn" *ngIf="loggedInUser?.username === user?.username"
                            (click)="openDeleteAccountDialog()"><i class="fas fa-user-times"></i> Delete
                            Account</button>
                        <button mat-raised-button color="warn" *ngIf="loggedInUser?.role === 'admin'"
                            (click)="openBanUserAccountDialog()"><i class="fas fa-ban"></i> Ban User</button>
                    </div>
                </mat-card-content>
            </mat-card>
        </section>
        <section class="bio-fandom-container">
            <mat-card class="bio">
                <mat-card-title>Bio</mat-card-title>
                <mat-card-content>
                    <p>{{user?.bio}}</p>
                </mat-card-content>
            </mat-card>
            <mat-card class="fandom-container">
                <mat-card-title>Fandoms</mat-card-title>
                <section class="fandoms">
                    <mat-card-content>
                        <p class="fandom-header"><span>Name</span><span>Activity Level</span></p>
                        <mat-card class="fandom-item-container" *ngFor="let fandom of user?.fandoms">
                            <section class="fandom-item">
                                <div class="fandom-info-container">
                                    <span>{{fandom.name | titlecase}}</span>
                                    <span class="category">{{fandom.category | titlecase}}</span>
                                </div>
                                <span>{{fandom.activityLevel}}</span>
                            </section>
                        </mat-card>
                    </mat-card-content>
                </section>
            </mat-card>
        </section>
        <mat-card class="events-container">
            <mat-card-title>Events Attending</mat-card-title>
            <section class="events">
                <app-events-summary-card [events]="user?.attendingEvents || []"></app-events-summary-card>
            </section>
        </mat-card>
    </div>
</section>